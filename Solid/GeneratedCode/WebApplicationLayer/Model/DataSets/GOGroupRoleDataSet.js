
////////////////////////////////////////////////////////////////////////////////////////////
// This is Generated Code
// You should not modify this code as it may be overwritten. Use Partial classes instead
// Generated By Generative Objects  
//////////////////////////////////////////////////////////////////////////////////////////// 

(function () {	
	'use strict';

	// GOGroupRole data set. Container for all GOGroupRole objects
	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet = function (rootDataSet) {
		var self = this;

        this._rootObjectDataSet = rootDataSet;
		// Collection holding all GOGroupRole objects for current dataset - key : internal object id - value : object
		this.gOGroupRoleObjects = {};
	
		// Mapping between entity primary key and objects internal id  - key : primary key(s) - value : internal object id
		this.gOGroupRoleObjectInternalIds = {};
		
		this.fkIndexes = {};
		
		// Index to quickly find all GOGroupRole with a given group foreign key
		this.fkIndexes.group = {};

		
		// Index to quickly find all GOGroupRole with a given role foreign key
		this.fkIndexes.role = {};

		
	};

	/***************************
	******** METHODS ***********
	***************************/

    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetRootObjectDataSet = function () {
        return this._rootObjectDataSet;
    };
		
    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.SetRootObjectDataSet = function (dataSet) {
        this._rootObjectDataSet = dataSet;
    };

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.Clone = function (rootDataSet) {
		var clone = new Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet(rootDataSet);
		if (!this.gOGroupRoleObjects)
			return clone;

		for (var key in this.gOGroupRoleObjects) {
			var objectClone = this.gOGroupRoleObjects[key].Clone();
			clone.gOGroupRoleObjects = objectClone;
		}
				
		clone.gOGroupRoleObjectInternalIds = {};

		for (var key0 in this.gOGroupRoleObjectInternalIds) {
		clone.gOGroupRoleObjectInternalIds[key0] = {};

		for (var key1 in this.gOGroupRoleObjectInternalIds[key0]) {
			clone.gOGroupRoleObjectInternalIds[key0][key1] = this.gOGroupRoleObjectInternalIds[key0][key1];
		}
		}
		for (var fk0 in this.fkIndexes.group) {
			clone.fkIndexes.group[fk0] = this.fkIndexes.group[fk0];	
		}
		for (var fk0 in this.fkIndexes.role) {
			clone.fkIndexes.role[fk0] = this.fkIndexes.role[fk0];	
		}
			
		return clone;
	};

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.AddOrReplaceObject = function (objectToAdd) {
		this.AddObject(objectToAdd, true);	
	};

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.AddObject = function (objectToAdd, replaceIfExists) {
		var existingObject = this.GetObject(objectToAdd);

        if (!replaceIfExists && existingObject)
            throw new Error("Object already exists");

		var newInternalId = 0;
			
		if (existingObject) {
			// We copy values instead of just replacing the object to make sure we don't loose existing ko notifications
			newInternalId = existingObject.Data.InternalObjectId();
			objectToAdd.Data.InternalObjectId(newInternalId);
			// we merge the contextIds because the objects may be associated to several context Ids
			for (var i = 0; i < existingObject.contextIds.length; i++) {
				var exist = false;
				for (var j = 0; j < objectToAdd.contextIds.length; j++) {
					if (existingObject.contextIds[i].join() === objectToAdd.contextIds[j].join()) {
						exist = true;
						break;
					}
				}

				if (exist === false)
					objectToAdd.contextIds.push(existingObject.contextIds[i]);
			}

			existingObject.CopyValuesFrom(objectToAdd);
		}
		else {
			newInternalId = this._rootObjectDataSet.getNextNewObjectId();
			objectToAdd.Data.InternalObjectId(newInternalId);
			this.gOGroupRoleObjects[newInternalId] = objectToAdd;
		}
			
		if (objectToAdd.Data.IsNew() === false && !existingObject) {
			this.gOGroupRoleObjectInternalIds[objectToAdd.Data.GOGroupName()] = this.gOGroupRoleObjectInternalIds[objectToAdd.Data.GOGroupName()] || {};
			this.gOGroupRoleObjectInternalIds[objectToAdd.Data.GOGroupName()][objectToAdd.Data.GORoleName()] = newInternalId;
		}
		// Update the Group FK Index 
		if (objectToAdd.Data.GOGroupName()) {			
			this.fkIndexes.group[objectToAdd.Data.GOGroupName()] = this.fkIndexes.group[objectToAdd.Data.GOGroupName()] || {};
			this.fkIndexes.group[objectToAdd.Data.GOGroupName()][newInternalId] = true;
		}
		// Update the Role FK Index 
		if (objectToAdd.Data.GORoleName()) {			
			this.fkIndexes.role[objectToAdd.Data.GORoleName()] = this.fkIndexes.role[objectToAdd.Data.GORoleName()] || {};
			this.fkIndexes.role[objectToAdd.Data.GORoleName()][newInternalId] = true;
		}
	};
	// Update the Group FK Index 
	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.UpdateGroupFKIndex = function (old_GOGroupName, new_GOGroupName, parentEntity) {
		if (old_GOGroupName !== undefined && old_GOGroupName !== null && old_GOGroupName !== "" && this.fkIndexes.group[old_GOGroupName] && this.fkIndexes.group[old_GOGroupName][parentEntity.Data.InternalObjectId()]) {
			delete this.fkIndexes.group[old_GOGroupName][parentEntity.Data.InternalObjectId()];
		}

        if (new_GOGroupName !== undefined && new_GOGroupName !== null && new_GOGroupName !== "") {
			this.fkIndexes.group[new_GOGroupName] = this.fkIndexes.group[new_GOGroupName] || {};
			this.fkIndexes.group[new_GOGroupName][parentEntity.Data.InternalObjectId()] = true;
        }                
    };                        
	// Update the Role FK Index 
	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.UpdateRoleFKIndex = function (old_GORoleName, new_GORoleName, parentEntity) {
		if (old_GORoleName !== undefined && old_GORoleName !== null && old_GORoleName !== "" && this.fkIndexes.role[old_GORoleName] && this.fkIndexes.role[old_GORoleName][parentEntity.Data.InternalObjectId()]) {
			delete this.fkIndexes.role[old_GORoleName][parentEntity.Data.InternalObjectId()];
		}

        if (new_GORoleName !== undefined && new_GORoleName !== null && new_GORoleName !== "") {
			this.fkIndexes.role[new_GORoleName] = this.fkIndexes.role[new_GORoleName] || {};
			this.fkIndexes.role[new_GORoleName][parentEntity.Data.InternalObjectId()] = true;
        }                
    };                        
		
    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.RemoveObject = function (objectToRemove) {
        if (!this.gOGroupRoleObjects)
            return;

		var objectToRemoveInternalId = null;
			
		if (objectToRemove.Data.IsNew() === true) {
			objectToRemoveInternalId = objectToRemove.Data.InternalObjectId();
		}
		else {
			if (!this.gOGroupRoleObjectInternalIds[objectToRemove.Data.GOGroupName()]) 			
				return;

			if (!this.gOGroupRoleObjectInternalIds[objectToRemove.Data.GOGroupName()][objectToRemove.Data.GORoleName()]) 			
				return;

			objectToRemoveInternalId = this.gOGroupRoleObjectInternalIds[objectToRemove.Data.GOGroupName()][objectToRemove.Data.GORoleName()];
		}
			
		if (!objectToRemoveInternalId || !this.gOGroupRoleObjects[objectToRemoveInternalId])			
			return; //object not in dataset => return
			
		this.gOGroupRoleObjects[objectToRemoveInternalId].release();
		delete this.gOGroupRoleObjects[objectToRemoveInternalId];
		
		if (objectToRemove.Data.IsNew() === false) {
			delete this.gOGroupRoleObjectInternalIds[objectToRemove.Data.GOGroupName()][objectToRemove.Data.GORoleName()];
		}

			// Delete the Group FK Index 
		if (objectToRemove.Data.GOGroupName() && this.fkIndexes.group[objectToRemove.Data.GOGroupName()] && this.fkIndexes.group[objectToRemove.Data.GOGroupName()][objectToRemoveInternalId])
			delete this.fkIndexes.group[objectToRemove.Data.GOGroupName()][objectToRemoveInternalId];
			// Delete the Role FK Index 
		if (objectToRemove.Data.GORoleName() && this.fkIndexes.role[objectToRemove.Data.GORoleName()] && this.fkIndexes.role[objectToRemove.Data.GORoleName()][objectToRemoveInternalId])
			delete this.fkIndexes.role[objectToRemove.Data.GORoleName()][objectToRemoveInternalId];
	};

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetObjectByInternalId = function (internalObjectId, includeHierarchy) {
        if (this.gOGroupRoleObjects[internalObjectId])
			return this.gOGroupRoleObjects[internalObjectId];		
		
		if(includeHierarchy) {
			// No hierarchy, nothing has been generated, unused bit of code
		}

		return null;
	};

 	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetObjectByPK = function(gOGroupName, gORoleName) {
		if (this.gOGroupRoleObjectInternalIds[gOGroupName]) {			
			if (this.gOGroupRoleObjects[this.gOGroupRoleObjectInternalIds[gOGroupName][gORoleName]]) {			
				return this.gOGroupRoleObjects[this.gOGroupRoleObjectInternalIds[gOGroupName][gORoleName]];
		}
		}

		return null;
	};

    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetObject = function (objectToGet) {
	    if (!this.gOGroupRoleObjects)
            return null;

		var objectToGetInternalId = null;

		if (objectToGet.Data.IsNew() === true) {
			objectToGetInternalId = objectToGet.Data.InternalObjectId();
		} else {
			if (!this.gOGroupRoleObjectInternalIds[objectToGet.Data.GOGroupName()]) 			
				return null;
			if (!this.gOGroupRoleObjectInternalIds[objectToGet.Data.GOGroupName()][objectToGet.Data.GORoleName()]) 			
				return null;
			objectToGetInternalId = this.gOGroupRoleObjectInternalIds[objectToGet.Data.GOGroupName()][objectToGet.Data.GORoleName()];
		}

		return objectToGetInternalId === null ? null : this.gOGroupRoleObjects[objectToGetInternalId];
    };

    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetObjectsMarkedForDeletion = function () {
        if (!this.gOGroupRoleObjects)
            return [];

		var toReturn = [];
			
		for (var prop in this.gOGroupRoleObjects) {
			if (this.gOGroupRoleObjects[prop].Data.IsMarkedForDeletion()) {
				toReturn.push(this.gOGroupRoleObjects[prop]);
			}
		}

		return toReturn;
    };

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetGroupRoleItemsForGroup = function (group) {
		var result = [];

		if (group.Data.IsNew()) {
            for (var prop in this.gOGroupRoleObjects) {
                if (this.gOGroupRoleObjects[prop].Data._group_NewObjectId() === group.Data.InternalObjectId())
                    result.push(this.gOGroupRoleObjects[prop]);
            }
        } else {
			if (this.fkIndexes.group[group.Data.Name()]){
				for (var internalId in this.fkIndexes.group[group.Data.Name()])
					result.push(this.gOGroupRoleObjects[internalId]);
			}
		}

		return result;
	};

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetGroupRoleItemsForRole = function (role) {
		var result = [];

		if (role.Data.IsNew()) {
            for (var prop in this.gOGroupRoleObjects) {
                if (this.gOGroupRoleObjects[prop].Data._role_NewObjectId() === role.Data.InternalObjectId())
                    result.push(this.gOGroupRoleObjects[prop]);
            }
        } else {
			if (this.fkIndexes.role[role.Data.Name()]){
				for (var internalId in this.fkIndexes.role[role.Data.Name()])
					result.push(this.gOGroupRoleObjects[internalId]);
			}
		}

		return result;
	};

	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.GetRelatedObjects = function (rootObject, relationName) {
		return null;
	};
		
	Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.cleanContext = function (thecontextId) {
		for (var prop in this.gOGroupRoleObjects) {
			var shouldDelete = true;

			if (this.gOGroupRoleObjects[prop].contextIds.length !== 0) {
				var contextIdsToKeep = [],
					len = this.gOGroupRoleObjects[prop].contextIds.length;
				for (var i = 0; i < len; i++) {
					var contextId = this.gOGroupRoleObjects[prop].contextIds[i];

					if (contextId.length < thecontextId.length) {
						contextIdsToKeep.push(contextId);
 					} else {										
						for (var j=0; j < thecontextId.length; j++) {
							if (contextId[j] !== thecontextId[j]) {
								contextIdsToKeep.push(contextId);
								break;
							}
						}
					}
				}
					
				this.gOGroupRoleObjects[prop].contextIds	= contextIdsToKeep;
					
				shouldDelete = (contextIdsToKeep.length === 0);
			}
				 				
			if (shouldDelete === true) {
				this.RemoveObject(this.gOGroupRoleObjects[prop]);				
			}
		}
	};
		
    Solid.Web.Model.DataSets.gOGroupRoleObjectsDataSet.prototype.Merge = function (dataSetToMerge) {
		if (!dataSetToMerge.gOGroupRoleObjects)
			return;
            					
		for (prop in dataSetToMerge.gOGroupRoleObjects) {
			if (dataSetToMerge.gOGroupRoleObjects[prop].Data.IsNew() === true)
                throw Error("Can't merge data sets with new objects");
				
			var objectToMerge = dataSetToMerge.gOGroupRoleObjects[prop].Clone();
			objectToMerge.Data.InternalObjectId(null);
			objectToMerge.ObjectsDataSet = this._rootObjectDataSet;
            this._rootObjectDataSet.AddOrReplaceObject(objectToMerge);
        }
    };
		

	if (window.ApplicationSourceHandler)
		window.ApplicationSourceHandler.onSourceLoaded("/Model/DataSets/GOGroupRoleDataSet.js");
} ());