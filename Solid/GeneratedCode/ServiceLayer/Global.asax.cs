////////////////////////////////////////////////////////////////////////////////////////////
// This is Generated Code
// You should not modify this code as it may be overwritten. Use Partial classes instead
// Generated By Generative Objects  
//////////////////////////////////////////////////////////////////////////////////////////// 
using GenerativeObjects.Practices.Settings;
using System;
using Unity;
using System.Web;
using System.Net;
using NLog;
using GenerativeObjects.Practices.ORMSupportClasses.NHibernate;

namespace Solid.ServiceLayer
{
    public class Application : HttpApplication
    {
		private static readonly Logger techLogger = LogManager.GetCurrentClassLogger();

        protected void Application_Start()
        {
			techLogger.Info("Application_Start");

            var container = Container.Initialize();
            var settings = container.Resolve<ISettingsProvider>();
            settings["LazyLoadingEnabled"] = false;
            Application["Container"] = container;

            ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12 | SecurityProtocolType.Tls | SecurityProtocolType.Ssl3 ;
        }

		protected void Application_End()
		{
			techLogger.Info("Application_End");
			NHibernateSessionController.CloseSessionFactory();
		}
    }
}
